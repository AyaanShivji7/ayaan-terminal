<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Ayaan Terminal – Test Dashboard</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <style>
    :root {
      --bg: #050816;
      --bg-elevated: #0b1020;
      --accent: #00e0b8;
      --accent-soft: #16a5ff;
      --text: #f9fafb;
      --text-muted: #9ca3af;
      --border: #1f2937;
      --error: #f97373;
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    html, body {
      height: 100%;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "SF Pro Text",
        "Inter", "Segoe UI", sans-serif;
      background: radial-gradient(circle at top, #0f172a 0, #020617 50%, #020617 100%);
      color: var(--text);
    }

    body {
      display: flex;
      flex-direction: column;
    }

    a {
      color: inherit;
      text-decoration: none;
    }

    button {
      font-family: inherit;
    }

    /* Layout */

    .app-shell {
      min-height: 100vh;
      display: flex;
      flex-direction: column;
    }

    .container {
      width: 100%;
      max-width: 1120px;
      margin: 0 auto;
      padding: 0 1.5rem;
    }

    /* NAV */

    .nav {
      background: rgba(3, 7, 18, 0.95);
      border-bottom: 1px solid var(--border);
      backdrop-filter: blur(12px);
      position: sticky;
      top: 0;
      z-index: 10;
    }

    .nav-inner {
      height: 3.5rem;
      display: flex;
      align-items: center;
      justify-content: space-between;
    }

    .brand {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      font-weight: 600;
      letter-spacing: 0.04em;
      font-size: 0.95rem;
    }

    .brand-mark {
      width: 28px;
      height: 28px;
      border-radius: 999px;
      background: radial-gradient(circle at 30% 30%, #00fff0, #00e0b8, #005f4f);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 0.7rem;
      box-shadow: 0 0 15px rgba(0, 224, 184, 0.6);
    }

    .nav-right {
      display: flex;
      align-items: center;
      gap: 0.75rem;
      font-size: 0.85rem;
    }

    .nav-user {
      color: var(--text-muted);
    }

    /* Buttons */

    .btn {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      padding: 0.45rem 0.9rem;
      border-radius: 999px;
      border: 1px solid transparent;
      font-size: 0.85rem;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.15s ease-out;
      background: transparent;
      color: var(--text);
      white-space: nowrap;
    }

    .btn-primary {
      background: linear-gradient(135deg, var(--accent), var(--accent-soft));
      color: #021015;
      border-color: transparent;
      box-shadow: 0 14px 30px rgba(0, 224, 184, 0.35);
    }

    .btn-primary:hover {
      box-shadow: 0 18px 40px rgba(0, 224, 184, 0.45);
      transform: translateY(-1px);
    }

    .btn-secondary {
      border-color: var(--border);
      background: rgba(15, 23, 42, 0.9);
    }

    .btn-secondary:hover {
      border-color: var(--accent);
    }

    .btn-ghost {
      border-color: transparent;
      background: transparent;
      color: var(--text-muted);
    }

    .btn-ghost:hover {
      color: var(--text);
    }

    /* LOGIN VIEW */

    main {
      flex: 1;
      padding: 2.5rem 0 2rem;
    }

    .login-view {
      display: none;
    }

    .login-card {
      max-width: 420px;
      margin: 3rem auto 0;
      background: rgba(15, 23, 42, 0.96);
      padding: 1.8rem 1.6rem;
      border-radius: 20px;
      border: 1px solid var(--border);
      box-shadow: 0 18px 50px rgba(0, 0, 0, 0.6);
    }

    .login-card h1 {
      font-size: 1.4rem;
      margin-bottom: 0.4rem;
    }

    .login-card p {
      font-size: 0.9rem;
      color: var(--text-muted);
      margin-bottom: 1.4rem;
    }

    .form-field {
      margin-bottom: 0.9rem;
    }

    .form-field label {
      display: block;
      font-size: 0.78rem;
      text-transform: uppercase;
      letter-spacing: 0.12em;
      color: var(--text-muted);
      margin-bottom: 0.23rem;
    }

    .form-input {
      width: 100%;
      border-radius: 10px;
      border: 1px solid var(--border);
      background: rgba(15, 23, 42, 0.98);
      color: var(--text);
      font-size: 0.9rem;
      padding: 0.55rem 0.7rem;
      outline: none;
      transition: border-color 0.15s ease-out, box-shadow 0.15s ease-out;
    }

    .form-input:focus {
      border-color: var(--accent);
      box-shadow: 0 0 0 1px rgba(0, 224, 184, 0.45);
    }

    .error-text {
      font-size: 0.8rem;
      color: var(--error);
      min-height: 1rem;
      margin-top: 0.2rem;
    }

    .login-footer {
      margin-top: 0.9rem;
      font-size: 0.8rem;
      color: var(--text-muted);
    }

    /* DASHBOARD / TERMINAL */

    .terminal-view {
      display: none;
    }

    .hero-strip {
      margin-bottom: 1.4rem;
      padding: 1rem 1.1rem;
      border-radius: 18px;
      border: 1px solid var(--border);
      background: rgba(15, 23, 42, 0.96);
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 1rem;
      font-size: 0.88rem;
    }

    .hero-strip-title {
      font-weight: 500;
    }

    .hero-strip-text {
      color: var(--text-muted);
      font-size: 0.85rem;
    }

    .dashboard {
      display: grid;
      grid-template-columns: minmax(0, 0.9fr) minmax(0, 1.1fr) minmax(0, 1.1fr);
      gap: 1rem;
    }

    @media (max-width: 960px) {
      .dashboard {
        grid-template-columns: minmax(0, 1fr);
      }
    }

    .panel {
      background: rgba(15, 23, 42, 0.97);
      border-radius: 18px;
      border: 1px solid var(--border);
      padding: 0.9rem 0.9rem 0.9rem;
      display: flex;
      flex-direction: column;
      min-height: 260px;
    }

    .panel-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 0.6rem;
    }

    .panel-title {
      font-size: 0.95rem;
      font-weight: 500;
    }

    .panel-subtitle {
      font-size: 0.8rem;
      color: var(--text-muted);
    }

    .badge {
      border-radius: 999px;
      border: 1px solid var(--border);
      padding: 0.18rem 0.55rem;
      font-size: 0.75rem;
      color: var(--text-muted);
    }

    /* WATCHLIST */

    .watchlist-form {
      display: flex;
      gap: 0.4rem;
      margin-bottom: 0.6rem;
    }

    .watchlist-form input {
      flex: 1;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      font-size: 0.8rem;
    }

    thead {
      border-bottom: 1px solid var(--border);
    }

    th, td {
      text-align: left;
      padding: 0.28rem 0.25rem;
    }

    th {
      color: var(--text-muted);
      font-weight: 500;
      font-size: 0.78rem;
    }

    tr:nth-child(even) td {
      background: rgba(15, 23, 42, 0.7);
    }

    .price-up {
      color: #4ade80;
    }

    .price-down {
      color: #f97373;
    }

    .watchlist-empty {
      font-size: 0.8rem;
      color: var(--text-muted);
      margin-top: 0.4rem;
    }

    .btn-small {
      padding: 0.2rem 0.45rem;
      font-size: 0.72rem;
    }

    /* DAILY 10 */

    .daily-list {
      list-style: none;
      margin: 0;
      padding: 0;
      display: flex;
      flex-direction: column;
      gap: 0.35rem;
      margin-bottom: 0.6rem;
      max-height: 210px;
      overflow-y: auto;
    }

    .daily-item {
      padding: 0.4rem 0.45rem;
      border-radius: 10px;
      border: 1px solid transparent;
      cursor: pointer;
      display: flex;
      justify-content: space-between;
      align-items: center;
      font-size: 0.82rem;
    }

    .daily-item:hover {
      border-color: var(--accent);
      background: rgba(15, 23, 42, 0.9);
    }

    .daily-item.active {
      border-color: var(--accent);
      background: rgba(15, 23, 42, 1);
    }

    .daily-main {
      display: flex;
      flex-direction: column;
      gap: 0.1rem;
    }

    .daily-symbol {
      font-weight: 500;
      font-size: 0.84rem;
    }

    .daily-note {
      color: var(--text-muted);
      font-size: 0.76rem;
    }

    .daily-tag {
      font-size: 0.7rem;
      border-radius: 999px;
      padding: 0.15rem 0.4rem;
      border: 1px solid var(--border);
      color: var(--text-muted);
    }

    .daily-detail {
      margin-top: 0.2rem;
      padding-top: 0.4rem;
      border-top: 1px solid var(--border);
      font-size: 0.8rem;
      color: var(--text-muted);
    }

    .daily-detail h4 {
      font-size: 0.9rem;
      margin-bottom: 0.25rem;
      color: var(--text);
    }

    .daily-detail p {
      margin-bottom: 0.25rem;
    }

    .daily-detail ul {
      margin: 0.2rem 0 0 1.1rem;
    }

    .daily-detail li {
      margin-bottom: 0.15rem;
    }

    /* CHATBOT */

    .chat-messages {
      flex: 1;
      border-radius: 12px;
      border: 1px solid var(--border);
      padding: 0.5rem 0.55rem;
      margin-bottom: 0.5rem;
      display: flex;
      flex-direction: column;
      gap: 0.35rem;
      font-size: 0.8rem;
      overflow-y: auto;
      background: rgba(15, 23, 42, 0.96);
    }

    .chat-message {
      max-width: 100%;
      padding: 0.35rem 0.45rem;
      border-radius: 10px;
    }

    .chat-message.user {
      align-self: flex-end;
      background: rgba(37, 99, 235, 0.2);
    }

    .chat-message.bot {
      align-self: flex-start;
      background: rgba(15, 23, 42, 0.9);
      border: 1px solid var(--border);
    }

    .chat-meta {
      font-size: 0.7rem;
      color: var(--text-muted);
      margin-bottom: 0.1rem;
    }

    .chat-input-row {
      display: flex;
      gap: 0.4rem;
    }

    .chat-input {
      flex: 1;
    }

    /* SMALL NOTES */

    .small-note {
      font-size: 0.75rem;
      color: var(--text-muted);
      margin-top: 0.25rem;
    }
  </style>
</head>
<body>
  <div class="app-shell">
    <!-- NAV -->
    <header class="nav">
      <div class="container nav-inner">
        <div class="brand">
          <div class="brand-mark">AT</div>
          <span>Ayaan Terminal</span>
        </div>
        <div class="nav-right">
          <span class="nav-user" id="navUserLabel"></span>
          <button id="logoutBtn" class="btn btn-ghost" style="display:none;">Logout</button>
        </div>
      </div>
    </header>

    <main>
      <div class="container">
        <!-- LOGIN VIEW -->
        <section id="loginView" class="login-view">
          <div class="login-card">
            <h1>Login to Ayaan Terminal</h1>
            <p>
              Simple email/password login for testing. This is all front-end only
              using <code>localStorage</code> as a model.
            </p>

            <form id="loginForm">
              <div class="form-field">
                <label for="email">Email</label>
                <input
                  id="email"
                  type="email"
                  class="form-input"
                  placeholder="you@example.com"
                  required
                />
              </div>
              <div class="form-field">
                <label for="password">Password</label>
                <input
                  id="password"
                  type="password"
                  class="form-input"
                  placeholder="Enter any test password"
                  required
                />
                <div id="loginError" class="error-text"></div>
              </div>

              <button type="submit" class="btn btn-primary" style="width:100%; margin-top:0.5rem;">
                Login / Create Test Account
              </button>
            </form>

            <div class="login-footer">
              This is a mock auth flow. In a real build, email and password would be
              verified on a backend, and sessions would be secure.
            </div>
          </div>
        </section>

        <!-- TERMINAL VIEW -->
        <section id="terminalView" class="terminal-view">
          <div class="hero-strip">
            <div>
              <div class="hero-strip-title">Ayaan Terminal – Test Dashboard</div>
              <div class="hero-strip-text">
                Left: your watchlist with live quotes. Middle: AI Daily 10 with a detail
                panel. Right: quant-style chatbot (placeholder for now).
              </div>
            </div>
            <button class="btn btn-secondary" type="button" onclick="refreshAllQuotes()">
              Refresh prices
            </button>
          </div>

          <div class="dashboard">
            <!-- WATCHLIST PANEL -->
            <div class="panel">
              <div class="panel-header">
                <div>
                  <div class="panel-title">Your Watchlist</div>
                  <div class="panel-subtitle">Symbols you add, live prices via stock API</div>
                </div>
                <span class="badge">Live test</span>
              </div>

              <form id="addStockForm" class="watchlist-form">
                <input
                  id="watchlistSymbolInput"
                  type="text"
                  class="form-input"
                  placeholder="Add symbol (e.g. NVDA, AAPL)"
                  autocomplete="off"
                />
                <button type="submit" class="btn btn-primary btn-small">Add</button>
              </form>

              <div style="flex:1; overflow:auto;">
                <table>
                  <thead>
                    <tr>
                      <th>Symbol</th>
                      <th>Last Price</th>
                      <th>Prev Close</th>
                      <th>Change</th>
                      <th></th>
                    </tr>
                  </thead>
                  <tbody id="watchlistTableBody">
                    <!-- rows injected by JS -->
                  </tbody>
                </table>
                <div id="watchlistEmpty" class="watchlist-empty">
                  No symbols yet. Add something like NVDA, AAPL, MSFT, etc.
                </div>
              </div>

              <div class="small-note">
                Uses your stock API key on the frontend in test mode. In production, this
                should go through a backend so your key is not exposed.
              </div>
            </div>

            <!-- DAILY 10 PANEL -->
            <div class="panel">
              <div class="panel-header">
                <div>
                  <div class="panel-title">AI Daily 10</div>
                  <div class="panel-subtitle">Example list of 10 ideas surfaced by the model</div>
                </div>
                <span class="badge">Demo data</span>
              </div>

              <ul id="dailyList" class="daily-list">
                <!-- items injected by JS -->
              </ul>

              <div id="dailyDetail" class="daily-detail">
                <!-- detail injected by JS -->
                <p>Select a name from the list above to see a sample detail view.</p>
              </div>
            </div>

            <!-- CHATBOT PANEL -->
            <div class="panel">
              <div class="panel-header">
                <div>
                  <div class="panel-title">Quant Chat</div>
                  <div class="panel-subtitle">Placeholder AI quant analyst in your pocket</div>
                </div>
                <span class="badge">Mocked</span>
              </div>

              <div id="chatMessages" class="chat-messages">
                <!-- messages injected by JS -->
              </div>

              <form id="chatForm" class="chat-input-row">
                <input
                  id="chatInput"
                  class="form-input chat-input"
                  type="text"
                  placeholder="Ask about a stock, risk, or thesis..."
                  autocomplete="off"
                />
                <button type="submit" class="btn btn-primary btn-small">Send</button>
              </form>

              <div class="small-note">
                For now this just returns a placeholder response that echoes your question.
                In a real build this would call an AI model and use your data.
              </div>
            </div>
          </div>
        </section>
      </div>
    </main>
  </div>

  <script>
    /***********************
     *  BASIC MOCK LOGIN   *
     ***********************/
    const loginView = document.getElementById("loginView");
    const terminalView = document.getElementById("terminalView");
    const navUserLabel = document.getElementById("navUserLabel");
    const logoutBtn = document.getElementById("logoutBtn");
    const loginForm = document.getElementById("loginForm");
    const loginError = document.getElementById("loginError");

    function getCurrentUser() {
      const raw = localStorage.getItem("ayaan_user");
      if (!raw) return null;
      try {
        return JSON.parse(raw);
      } catch {
        return null;
      }
    }

    function setCurrentUser(user) {
      localStorage.setItem("ayaan_user", JSON.stringify(user));
    }

    function clearCurrentUser() {
      localStorage.removeItem("ayaan_user");
    }

    function updateAuthUI() {
      const user = getCurrentUser();
      if (user) {
        loginView.style.display = "none";
        terminalView.style.display = "block";
        navUserLabel.textContent = user.email || "";
        logoutBtn.style.display = "inline-flex";
      } else {
        loginView.style.display = "block";
        terminalView.style.display = "none";
        navUserLabel.textContent = "";
        logoutBtn.style.display = "none";
      }
    }

    loginForm.addEventListener("submit", (e) => {
      e.preventDefault();
      loginError.textContent = "";

      const email = document.getElementById("email").value.trim();
      const password = document.getElementById("password").value.trim();

      if (!email || !password) {
        loginError.textContent = "Please enter an email and password.";
        return;
      }

      // For now any email+password is accepted and stored in localStorage.
      setCurrentUser({ email });
      updateAuthUI();
    });

    logoutBtn.addEventListener("click", () => {
      clearCurrentUser();
      updateAuthUI();
    });

    /*****************************
     *  WATCHLIST + STOCK API    *
     *****************************/

    // NOTE: This is wired to a Finnhub-style quote endpoint as an example.
    // If your key is for a different provider, update the URL + field mapping.
    const STOCK_API_KEY = "d4ib5b9r01qkv40houkgd4ib5b9r01qkv40houl0";

    function buildQuoteUrl(symbol) {
      const encoded = encodeURIComponent(symbol.toUpperCase().trim());
      // Example: Finnhub quote endpoint returns { c: current, pc: previous close, ... }
      return `https://finnhub.io/api/v1/quote?symbol=${encoded}&token=${STOCK_API_KEY}`;
    }

    const watchlist = []; // { symbol, lastPrice, prevClose, change }

    const watchlistTableBody = document.getElementById("watchlistTableBody");
    const watchlistEmpty = document.getElementById("watchlistEmpty");
    const addStockForm = document.getElementById("addStockForm");
    const watchlistSymbolInput = document.getElementById("watchlistSymbolInput");

    addStockForm.addEventListener("submit", (e) => {
      e.preventDefault();
      const rawSymbol = watchlistSymbolInput.value.trim().toUpperCase();
      if (!rawSymbol) return;

      if (watchlist.some((item) => item.symbol === rawSymbol)) {
        watchlistSymbolInput.value = "";
        return;
      }

      watchlist.push({
        symbol: rawSymbol,
        lastPrice: null,
        prevClose: null,
        change: null,
      });

      watchlistSymbolInput.value = "";
      renderWatchlistRows();
      fetchAndUpdateQuote(rawSymbol);
    });

    function removeFromWatchlist(symbol) {
      const idx = watchlist.findIndex((item) => item.symbol === symbol);
      if (idx !== -1) {
        watchlist.splice(idx, 1);
        renderWatchlistRows();
      }
    }

    async function fetchQuote(symbol) {
      const url = buildQuoteUrl(symbol);
      try {
        const res = await fetch(url);
        if (!res.ok) {
          console.error("API error for", symbol, res.status);
          return null;
        }
        const data = await res.json();

        // For a Finnhub-style response:
        // c = current price, pc = previous close
        return {
          symbol,
          lastPrice: typeof data.c === "number" ? data.c : null,
          prevClose: typeof data.pc === "number" ? data.pc : null,
        };
      } catch (err) {
        console.error("Network error fetching quote for", symbol, err);
        return null;
      }
    }

    async function fetchAndUpdateQuote(symbol) {
      const quote = await fetchQuote(symbol);
      if (!quote) return;

      const item = watchlist.find((i) => i.symbol === symbol);
      if (!item) return;

      item.lastPrice = quote.lastPrice;
      item.prevClose = quote.prevClose;

      if (item.lastPrice != null && item.prevClose != null && item.prevClose !== 0) {
        const diff = item.lastPrice - item.prevClose;
        item.change = (diff / item.prevClose) * 100;
      } else {
        item.change = null;
      }

      renderWatchlistRows();
    }

    function refreshAllQuotes() {
      watchlist.forEach((item) => {
        fetchAndUpdateQuote(item.symbol);
      });
    }

    // Auto-refresh every 30 seconds
    setInterval(refreshAllQuotes, 30000);

    function renderWatchlistRows() {
      watchlistTableBody.innerHTML = "";
      watchlistEmpty.style.display = watchlist.length === 0 ? "block" : "none";

      watchlist.forEach((item) => {
        const tr = document.createElement("tr");

        const changeText =
          item.change == null
            ? "-"
            : `${item.change >= 0 ? "+" : ""}${item.change.toFixed(2)}%`;

        const changeClass =
          item.change == null
            ? ""
            : item.change > 0
            ? "price-up"
            : item.change < 0
            ? "price-down"
            : "";

        tr.innerHTML = `
          <td>${item.symbol}</td>
          <td>${item.lastPrice != null ? item.lastPrice.toFixed(2) : "-"}</td>
          <td>${item.prevClose != null ? item.prevClose.toFixed(2) : "-"}</td>
          <td class="${changeClass}">${changeText}</td>
          <td><button type="button" class="btn btn-ghost btn-small" data-symbol="${item.symbol}">✕</button></td>
        `;

        watchlistTableBody.appendChild(tr);
      });

      document.querySelectorAll("#watchlistTableBody button[data-symbol]").forEach(
        (btn) => {
          btn.addEventListener("click", () => {
            const symbol = btn.getAttribute("data-symbol");
            removeFromWatchlist(symbol);
          });
        }
      );
    }

    /****************************
     *  AI DAILY 10 (STATIC)    *
     ****************************/
    const dailyIdeas = [
      {
        symbol: "NVDA",
        name: "NVIDIA Corporation",
        risk: "Growth",
        horizon: "Next 3–12 months",
        note: "AI infrastructure and data center demand story.",
        confidence: 88,
        targetRange: "$150 – $165",
        drivers: [
          "Continued AI training/inference capex from cloud providers.",
          "Expansion into inference, networking, and software layers.",
          "Upside if AI spending stays stronger for longer.",
        ],
        risks: [
          "AI demand slowdown or overbuild risk.",
          "Regulatory or export restrictions.",
        ],
      },
      {
        symbol: "AAPL",
        name: "Apple Inc.",
        risk: "Conservative",
        horizon: "Next 12–24 months",
        note: "Strong cash flows, ecosystem, and buybacks.",
        confidence: 80,
        targetRange: "$210 – $225",
        drivers: [
          "Services growth and ecosystem lock-in.",
          "Ongoing buybacks supporting EPS.",
        ],
        risks: ["Hardware cycle slowdowns.", "Regulatory pressure in app stores."],
      },
      {
        symbol: "MSFT",
        name: "Microsoft Corporation",
        risk: "Conservative",
        horizon: "Next 12–24 months",
        note: "Cloud + AI exposure through Azure and OpenAI.",
        confidence: 85,
        targetRange: "$430 – $460",
        drivers: [
          "Azure growth and AI workloads.",
          "Productivity suite integration of AI copilots.",
        ],
        risks: ["Cloud growth deceleration.", "Competition from other hyperscalers."],
      },
      {
        symbol: "AMZN",
        name: "Amazon.com, Inc.",
        risk: "Growth",
        horizon: "Next 3–12 months",
        note: "AWS + retail margin expansion opportunity.",
        confidence: 83,
        targetRange: "$210 – $235",
        drivers: [
          "Cloud spending recovery.",
          "Retail efficiency and margin gains.",
        ],
        risks: [
          "Macro-driven weakness in e-commerce.",
          "Cloud competition and pricing pressure.",
        ],
      },
      {
        symbol: "GOOGL",
        name: "Alphabet Inc.",
        risk: "Growth",
        horizon: "Next 3–12 months",
        note: "Search, YouTube, and cloud with AI optionality.",
        confidence: 82,
        targetRange: "$190 – $210",
        drivers: [
          "Advertising recovery.",
          "AI integration across search/products.",
        ],
        risks: ["Regulatory risk.", "AI competition impacting search economics."],
      },
      {
        symbol: "TSLA",
        name: "Tesla, Inc.",
        risk: "Speculative",
        horizon: "Next 6–24 months",
        note: "High-volatility EV and autonomy story.",
        confidence: 72,
        targetRange: "$250 – $290",
        drivers: [
          "Software and autonomy progress.",
          "Manufacturing cost improvements.",
        ],
        risks: [
          "EV demand cyclicality.",
          "Competitive pressure in EV pricing.",
        ],
      },
      {
        symbol: "META",
        name: "Meta Platforms, Inc.",
        risk: "Growth",
        horizon: "Next 3–12 months",
        note: "Advertising, Reels, and AI-driven optimization.",
        confidence: 81,
        targetRange: "$550 – $600",
        drivers: [
          "Ad tools and optimization with AI.",
          "Cost discipline and margin improvement.",
        ],
        risks: [
          "Regulatory or privacy changes.",
          "Ad demand cyclicality in macro downturns.",
        ],
      },
      {
        symbol: "NFLX",
        name: "Netflix, Inc.",
        risk: "Growth",
        horizon: "Next 3–12 months",
        note: "Streaming scale with ad tier and pricing power.",
        confidence: 78,
        targetRange: "$700 – $760",
        drivers: [
          "Subscriber growth and engagement.",
          "Ad-supported tier monetization.",
        ],
        risks: [
          "Content spend vs. returns.",
          "Competition in streaming.",
        ],
      },
      {
        symbol: "BRK.B",
        name: "Berkshire Hathaway Inc.",
        risk: "Conservative",
        horizon: "Next 12–36 months",
        note: "Diversified exposure to quality businesses.",
        confidence: 79,
        targetRange: "$440 – $470",
        drivers: [
          "Underlying portfolio performance.",
          "Insurance and reinsurance profitability.",
        ],
        risks: [
          "Macro or market drawdowns.",
          "Succession uncertainty.",
        ],
      },
      {
        symbol: "SHOP",
        name: "Shopify Inc.",
        risk: "Speculative",
        horizon: "Next 3–12 months",
        note: "E-commerce enablement with operating leverage potential.",
        confidence: 74,
        targetRange: "$80 – $90",
        drivers: [
          "Merchant growth and attach of services.",
          "Improved margins at scale.",
        ],
        risks: [
          "SMB exposure in macro slowdown.",
          "Competition in e-commerce tools.",
        ],
      },
    ];

    const dailyListEl = document.getElementById("dailyList");
    const dailyDetailEl = document.getElementById("dailyDetail");
    let selectedIdeaSymbol = null;

    function renderDailyList() {
      dailyListEl.innerHTML = "";
      dailyIdeas.forEach((idea) => {
        const li = document.createElement("li");
        li.className = "daily-item" + (idea.symbol === selectedIdeaSymbol ? " active" : "");
        li.dataset.symbol = idea.symbol;

        li.innerHTML = `
          <div class="daily-main">
            <span class="daily-symbol">${idea.symbol} · ${idea.name}</span>
            <span class="daily-note">${idea.note}</span>
          </div>
          <div>
            <span class="daily-tag">${idea.risk}</span>
          </div>
        `;

        li.addEventListener("click", () => {
          selectedIdeaSymbol = idea.symbol;
          renderDailyList();
          renderDailyDetail(idea);
        });

        dailyListEl.appendChild(li);
      });
    }

    function renderDailyDetail(idea) {
      dailyDetailEl.innerHTML = `
        <h4>${idea.symbol} · ${idea.name}</h4>
        <p><strong>AI Confidence:</strong> ${idea.confidence}/100</p>
        <p><strong>Suggested exit range:</strong> ${idea.targetRange}</p>
        <p><strong>Time horizon:</strong> ${idea.horizon}</p>
        <p><strong>What could drive it there:</strong></p>
        <ul>${idea.drivers.map((d) => `<li>${d}</li>`).join("")}</ul>
        <p style="margin-top:0.25rem;"><strong>Key risks:</strong></p>
        <ul>${idea.risks.map((r) => `<li>${r}</li>`).join("")}</ul>
        <p class="small-note" style="margin-top:0.3rem;">
          Educational only, not financial advice. This is a static demo of the
          type of detail view each of the AI Daily 10 names would have.
        </p>
      `;
    }

    /****************************
     *  CHATBOT (PLACEHOLDER)   *
     ****************************/
    const chatMessagesEl = document.getElementById("chatMessages");
    const chatForm = document.getElementById("chatForm");
    const chatInput = document.getElementById("chatInput");

    const chatMessages = [];

    function addChatMessage(role, text) {
      chatMessages.push({ role, text });
      renderChatMessages();
    }

    function renderChatMessages() {
      chatMessagesEl.innerHTML = "";

      chatMessages.forEach((msg) => {
        const div = document.createElement("div");
        div.className = "chat-message " + (msg.role === "user" ? "user" : "bot");
        div.innerHTML = `
          <div class="chat-meta">${msg.role === "user" ? "You" : "Quant Bot"}</div>
          <div>${msg.text}</div>
        `;
        chatMessagesEl.appendChild(div);
      });

      chatMessagesEl.scrollTop = chatMessagesEl.scrollHeight;
    }

    chatForm.addEventListener("submit", (e) => {
      e.preventDefault();
      const text = chatInput.value.trim();
      if (!text) return;
      chatInput.value = "";

      addChatMessage("user", text);

      // Placeholder "AI" response – here you could call a real LLM later.
      const response =
        "This is a placeholder quant-style response. In the real build, this " +
        "would analyze your question with AI and your data.\n\n" +
        "For now, I'm just echoing your question so you can see the flow:\n\n" +
        `"${text}"`;

      setTimeout(() => {
        addChatMessage("bot", response.replace(/\n/g, "<br/>"));
      }, 300);
    });

    // Initialize
    (function init() {
      updateAuthUI();
      renderDailyList();
      addChatMessage(
        "bot",
        "Welcome to the Quant Chat. Ask about a ticker, risk scenario, or how to build a thesis."
      );
    })();
  </script>
</body>
</html>

